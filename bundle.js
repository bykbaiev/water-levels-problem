(()=>{"use strict";var e,t,r="#landscapeEl",n="#time",i="#error",a="#result",h=1e3,u=500,l=function(e){document.querySelector("#landscape").innerHTML=function(e){var t=e.length,r=Math.max.apply(Math,e.map((function(e){return e.height+e.water})));if(0===t)return'<div class="empty" style="width: 1000px; height: 500px; line-height: 500px;">Please, provide the landscape</div>';var n,i,a=Math.floor(1.3*r),l=u/a,o=(n=h/t,i=l,function(e){var t=e.height,r=e.water;return'\n        <div class="segment" style="width: '+n+'px">\n            <div class="total">'+(t+r)+'</div>\n            <div class="water" style="height: '+r*i+'px"></div>\n            <div class="ground" style="height: '+t*i+'px"></div>\n            <div class="water-level">'+r+"</div>\n        </div>\n    "});return'\n        <div class="board-wrapper" style="width: 1000px; height: 500px;">\n            '+Array(a).fill(0).map((function(e,t){return'<div class="line" style="height:'+l+'px"></div>'})).join("")+'\n            <div class="board">\n                '+e.map(o).join("")+'\n                <div class="ruler">\n                    '+Array(a).fill(0).map((function(e,t){return'<div class="ruler-item" style="height:'+l+'px"><div class="ruler-number" style="bottom:-10px">'+t+"</div></div>"})).join("")+"\n                </div>\n            </div>\n        </div>\n    "}(e)},o=function(e){document.querySelector(i).innerHTML=e},c=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],h=0,u=a.length;h<u;h++,i++)n[i]=a[h];return n},s=function(e,t){return Number((e-t).toFixed(5))},d=function(e){return e.reduce((function(e,t){return e+t.height+t.water}),0)},v=function(e,t){return s(t*e.length,d(e))},g=function(e){if(e.length<2)return e;var t=Math.max.apply(Math,e.map((function(e){return e.height}))),r=t*e.length,n=d(e);if(r<=n){var i=n/e.length;return e.map((function(e){var t=e.height;return{height:t,water:s(i,t)}}))}var a=e.filter((function(e){return e.height===t})),h=Math.max.apply(Math,a.map((function(e){return e.water}))),u=e.findIndex((function(e){var r=e.height,n=e.water;return r===t&&n===h})),l=e[u],o=e.slice(0,u),p=e.slice(u+1),f=v(o,t),m=v(p,t),w=h/2;return f>=w&&m>=w?c(g(o.map((function(e,t){return t===o.length-1?{height:e.height,water:e.water+w}:e}))),[{height:l.height,water:0}],g(p.map((function(e,t){return 0===t?{height:e.height,water:e.water+w}:e})))):f<w?c(g(o.map((function(e,t){return t===o.length-1?{height:e.height,water:e.water+f}:e}))),[{height:l.height,water:0}],g(p.map((function(e,t){return 0===t?{height:e.height,water:s(e.water+h,f)}:e})))):c(g(o.map((function(e,t){return t===o.length-1?{height:e.height,water:s(e.water+h,m)}:e}))),[{height:l.height,water:0}],g(p.map((function(e,t){return 0===t?{height:e.height,water:e.water+m}:e}))))};e=function(){document.querySelector(i).innerHTML="",document.querySelector(a).innerHTML="",function(e,t){var r=e.split(",").map((function(e){return parseFloat(e)})),n=parseFloat(t);if(r.some((function(e){return isNaN(e)||e<0})))o("There is invalid landscape: every segment should be valid positive number");else if(isNaN(n)||n<0)o("There is invalid time period: it should be positive");else{var i,h=function(e,t){var r=1*t;return g(e.map((function(e){return{height:e.height,water:e.water+r}})))}(r.map((function(e){return{height:e,water:0}})),n);l(h),i=h.map((function(e){return e.water})).join(","),document.querySelector(a).innerHTML=i}}(document.querySelector(r).value,document.querySelector(n).value)},t=function(t){"Enter"===t.key&&e()},document.querySelector("#start").addEventListener("click",e),document.querySelector(r).addEventListener("keypress",t),document.querySelector(n).addEventListener("keypress",t),l([])})();