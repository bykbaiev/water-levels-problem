(()=>{"use strict";var e,t,r=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],u=0,h=a.length;u<h;u++,i++)n[i]=a[u];return n},n="#landscapeEl",i="#time",a="#error",u="#result",h=1e3,c=500,o=("div",function(e,t){var r=document.createElement("div");return Object.keys(e).map((function(t){return r.setAttribute(t,e[t])})),t.map((function(e){return r.appendChild(e)})),r}),l=function(e){return document.createTextNode(e)},s=function(e){var t=Math.ceil(e/25);return{diff:t,items:Array(e).fill(0).map((function(e,t){return t})).filter((function(e){return e%t==0}))}},f=function(e,t){var r=s(e),n=r.items,i=r.diff;return n.map((function(e){return o({class:"ruler-item",style:"height:"+t*i+"px"},[o({class:"ruler-number"},[l(e.toString())])])}))},p=function(e){var t=document.querySelector("#landscape");t.innerHTML="",t.append(function(e){var t=e.length,n=Math.max.apply(Math,e.map((function(e){return e.height+e.water})));if(0===t)return o({class:"empty",style:"width: 1000px; height: 500px; line-height: 500px;"},[l("Please provide the landscape")]);var i,a,u=Math.ceil(1.3*n),p=c/u,g=(i=h/t,a=p,function(e){var t=e.height,r=e.water;return o({class:"segment",style:"width:"+i+"px"},[o({class:"total"},[l((t+r).toFixed(3))]),o({class:"water",style:"height: "+r*a+"px"},[]),o({class:"ground",style:"height: "+t*a+"px"},[]),o({class:"water-level"},[l(r.toFixed(3))])])});return o({class:"board-wrapper",style:"width: 1000px; height: 500px;"},r(function(e,t){var r=s(e),n=r.items,i=r.diff;return n.map((function(){return o({class:"line",style:"height:"+t*i+"px"},[])}))}(u,p),[o({class:"board"},r(e.map(g),[o({class:"ruler"},f(u,p))]))]))}(e))},g=function(e){document.querySelector(a).innerHTML=e},d=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],u=0,h=a.length;u<h;u++,i++)n[i]=a[u];return n},m=function(e,t){return Number((e-t).toFixed(5))},v=function(e){return e.reduce((function(e,t){return e+t.height+t.water}),0)},w=function(e,t){return m(t*e.length,v(e))},y=function(e){if(e.length<2)return e;var t=Math.max.apply(Math,e.map((function(e){return e.height}))),r=t*e.length,n=v(e);if(r<=n){var i=n/e.length;return e.map((function(e){var t=e.height;return{height:t,water:m(i,t)}}))}var a=e.filter((function(e){return e.height===t})),u=Math.max.apply(Math,a.map((function(e){return e.water}))),h=e.findIndex((function(e){var r=e.height,n=e.water;return r===t&&n===u})),c=e[h],o=e.slice(0,h),l=e.slice(h+1),s=w(o,t),f=w(l,t),p=u/2;return s>=p&&f>=p?d(y(o.map((function(e,t){return t===o.length-1?{height:e.height,water:e.water+p}:e}))),[{height:c.height,water:0}],y(l.map((function(e,t){return 0===t?{height:e.height,water:e.water+p}:e})))):s<p?d(y(o.map((function(e,t){return t===o.length-1?{height:e.height,water:e.water+s}:e}))),[{height:c.height,water:0}],y(l.map((function(e,t){return 0===t?{height:e.height,water:m(e.water+u,s)}:e})))):d(y(o.map((function(e,t){return t===o.length-1?{height:e.height,water:m(e.water+u,f)}:e}))),[{height:c.height,water:0}],y(l.map((function(e,t){return 0===t?{height:e.height,water:e.water+f}:e}))))};e=function(){document.querySelector(a).innerHTML="",document.querySelector(u).innerHTML="",function(e,t){var r=e.split(",").map((function(e){return parseFloat(e)})),n=parseFloat(t);if(r.some((function(e){return isNaN(e)||e<0})))g("There is invalid landscape: every segment should be valid positive number");else if(isNaN(n)||n<0)g("There is invalid time period: it should be positive");else{var i,a=function(e,t){var r=1*t;return y(e.map((function(e){return{height:e.height,water:e.water+r}})))}(r.map((function(e){return{height:e,water:0}})),n);p(a),i=a.map((function(e){return e.water})).join(","),document.querySelector(u).innerHTML=i}}(document.querySelector(n).value,document.querySelector(i).value)},t=function(t){"Enter"===t.key&&e()},document.querySelector("#start").addEventListener("click",e),document.querySelector(n).addEventListener("keypress",t),document.querySelector(i).addEventListener("keypress",t),p([])})();